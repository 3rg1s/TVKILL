/**
*   Copyright (C) 2015 Sebastian Kappes
*
*   This program is free software: you can redistribute it and/or modify
*   it under the terms of the GNU General Public License as published by
*   the Free Software Foundation, either version 3 of the License, or
*   (at your option) any later version.
*
*   This program is distributed in the hope that it will be useful,
*   but WITHOUT ANY WARRANTY; without even the implied warranty of
*   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
*   GNU General Public License for more details.
*
*   You should have received a copy of the GNU General Public License
*   along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
package com.redirectapps.tvkill;

import android.content.Context;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;


public class Brand{

    private Pattern[] patterns;
    boolean dotransmit = true;
    private String designation;

    private Brand (String designation, Pattern[] patterns) {
        this.patterns=patterns;
        this.designation=designation;
    }

    //this method transmits all of the brands patterns
    public void kill(Context c) {
        for (Pattern r : patterns) {
            r.send(c);
            if (patterns.length>1)
            wait(c);
        }
    }

    //This Method transmits all patterns of all brands
    public static void killAll(Context c) {
        //Check if additional patterns shall be transmitted
        int depth = 1;
        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(c);
        if (preferences.getBoolean("depth",false)) {
            //TODO: determine longest brand-pattern-array
            depth = 2;
        }
        //Transmit all patterns
        for (int i = 0; i<depth; i++) {
            for (Brand b : allBrands) {
                if (b.dotransmit) {
                    if (i<b.patterns.length) {
                        b.patterns[i].send(c);
                        wait(c);
                    }
                }
            }
        }
    }

    //Wait for a certain time to avoid a misinterpretation of the commands when they are sent succecevly
    private static void wait(Context c) {
        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(c);
        try {
            Thread.sleep(Long.parseLong(preferences.getString("delay","0")));
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }


    private static Brand sony = new Brand(
            "sony",
            new Pattern[] {
                    //Sony[0](40064,1,1,96,24,48,24,48,24,48,24,48,24,24,24,48,24,24,24,48,24,24,24,24,24,24,24,24,985,96,24,48,24,48,24,48,24,48,24,24,24,48,24,24,24,48,24,24,24,24,24,24,24,24,985,96,24,48,24,48,24,48,24,48,24,24,24,48,24,24,24,48,24,24,24,24,24,24,24,24,5128)
                    new Pattern(40064, new int[]{1, 1, 96, 24, 48, 24, 48, 24, 48, 24, 48, 24, 24, 24, 48, 24, 24, 24, 48, 24, 24, 24, 24, 24, 24, 24, 24, 985, 96, 24, 48, 24, 48, 24, 48, 24, 48, 24, 24, 24, 48, 24, 24, 24, 48, 24, 24, 24, 24, 24, 24, 24, 24, 985, 96, 24, 48, 24, 48, 24, 48, 24, 48, 24, 24, 24, 48, 24, 24, 24, 48, 24, 24, 24, 24, 24, 24, 24, 24, 5128})
            }
    );

    private static Brand samsung = new Brand(
            "samsung",
            new Pattern[] {
                    //Samsung[1060](38343,1,1,170,172,21,65,21,65,21,65,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,65,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,22,21,22,21,65,21,65,21,65,21,65,21,22,21,22,21,65,21,65,21,22,21,1788,170,172,21,22,21,4907)
                    new Pattern(38343, new int[]{1,1,170,172,21,65,21,65,21,65,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,65,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,22,21,22,21,65,21,65,21,65,21,65,21,22,21,22,21,65,21,65,21,22,21,1788,170,172,21,22,21,4907})
            }
    );

    private static Brand lg = new Brand(
            "lg",
            new Pattern[] {
                    //LG[1178](38226,1,1,343,171,21,22,21,22,21,65,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,22,21,65,21,65,21,65,21,65,21,65,21,65,21,22,21,65,21,22,21,22,21,22,21,65,21,65,21,22,21,65,21,22,21,65,21,65,21,65,21,22,21,22,21,4892)
                    new Pattern(38226, new int[]{1,1,343,171,21,22,21,22,21,65,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,22,21,65,21,65,21,65,21,65,21,65,21,65,21,22,21,65,21,22,21,22,21,22,21,65,21,65,21,22,21,65,21,22,21,65,21,65,21,65,21,22,21,22,21,4892})
            }
    );

    private static Brand panasonic = new Brand(
            "panasonic",
            new Pattern[] {
                    //Panasonic[1291](36873,1,1,128,64,16,16,16,48,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,48,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,48,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,48,16,48,16,48,16,48,16,48,16,48,16,16,16,16,16,48,16,48,16,48,16,48,16,48,16,48,16,16,16,48,16,4719)
                    new Pattern(36873, new int[]{1,1,128,64,16,16,16,48,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,48,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,48,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,48,16,48,16,48,16,48,16,48,16,48,16,16,16,16,16,48,16,48,16,48,16,48,16,48,16,48,16,16,16,48,16,4719})
            }
    );

    private static Brand philips = new Brand(
            "philips",
            new Pattern[] {
                    //Philips[1154](36231,1,1,32,32,64,32,32,32,32,32,32,32,32,32,32,32,32,32,32,63,32,32,64,32,32,4637)
                    new Pattern(36231, new int[]{1,1,32,32,64,32,32,32,32,32,32,32,32,32,32,32,32,32,32,63,32,32,64,32,32,4637})
            }
    );

    private static Brand nec = new Brand(
            "nec",
            new Pattern[] {
                    //NEC[30](38226,1,1,343,171,21,22,21,22,21,65,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,22,21,65,21,65,21,65,21,65,21,65,21,22,21,22,21,22,21,65,21,22,21,22,21,22,21,22,21,65,21,65,21,65,21,22,21,65,21,65,21,65,21,65,21,4892)
                    new Pattern(38226,new int[]{1,1,343,171,21,22,21,22,21,65,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,22,21,65,21,65,21,65,21,65,21,65,21,22,21,22,21,22,21,65,21,22,21,22,21,22,21,22,21,65,21,65,21,65,21,22,21,65,21,65,21,65,21,65,21,4892}),
                    //NEC[1704](38343,1,1,343,172,21,22,21,22,21,22,21,65,21,65,21,22,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,65,21,65,21,65,21,65,21,65,21,65,21,22,21,22,21,4907)
                    new Pattern(38343, new int[]{1,1,343,172,21,22,21,22,21,22,21,65,21,65,21,22,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,65,21,65,21,65,21,65,21,65,21,65,21,22,21,22,21,4907})
            }
    );

    private static Brand sharp = new Brand(
            "sharp",
            new Pattern[] {
                    //Sharp[1393](38226,1,1,10,70,10,30,10,30,10,30,10,70,10,70,10,70,10,30,10,70,10,30,10,30,10,70,10,30,10,70,10,30,10,1663,10,70,10,30,10,30,10,30,10,70,10,30,10,30,10,70,10,30,10,70,10,70,10,30,10,70,10,30,10,70,10,1663,10,70,10,30,10,30,10,30,10,70,10,70,10,70,10,30,10,70,10,30,10,30,10,70,10,30,10,70,10,30,10,4892)
                    new Pattern(38226, new int[]{1,1,10,70,10,30,10,30,10,30,10,70,10,70,10,70,10,30,10,70,10,30,10,30,10,70,10,30,10,70,10,30,10,1663,10,70,10,30,10,30,10,30,10,70,10,30,10,30,10,70,10,30,10,70,10,70,10,30,10,70,10,30,10,70,10,1663,10,70,10,30,10,30,10,30,10,70,10,70,10,70,10,30,10,70,10,30,10,30,10,70,10,30,10,70,10,30,10,4892})
            }
    );

    private static Brand jvc = new Brand(
            "jvc",
            new Pattern[] {
                    //JVC[1253](38226,1,1,321,161,20,60,20,60,20,20,20,20,20,20,20,20,20,20,20,20,20,60,20,60,20,60,20,20,20,60,20,20,20,20,20,20,20,859,20,60,20,60,20,20,20,20,20,20,20,20,20,20,20,20,20,60,20,60,20,60,20,20,20,60,20,20,20,20,20,20,20,833,20,60,20,60,20,20,20,20,20,20,20,20,20,20,20,20,20,60,20,60,20,60,20,20,20,60,20,20,20,20,20,20,20,4892)
                    new Pattern(38226, new int[]{1,1,321,161,20,60,20,60,20,20,20,20,20,20,20,20,20,20,20,20,20,60,20,60,20,60,20,20,20,60,20,20,20,20,20,20,20,859,20,60,20,60,20,20,20,20,20,20,20,20,20,20,20,20,20,60,20,60,20,60,20,20,20,60,20,20,20,20,20,20,20,833,20,60,20,60,20,20,20,20,20,20,20,20,20,20,20,20,20,60,20,60,20,60,20,20,20,60,20,20,20,20,20,20,20,4892})
            }
    );

    private static Brand toshiba = new Brand(
            "toshiba",
            new Pattern[] {
                    //Toshiba[1156](38226,1,1,343,171,21,22,21,22,21,22,21,22,21,22,21,22,21,65,21,22,21,65,21,65,21,65,21,65,21,65,21,65,21,22,21,65,21,65,21,65,21,65,21,65,21,65,21,65,21,65,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,65,21,4892)
                    new Pattern(38226, new int[]{1,1,343,171,21,22,21,22,21,22,21,22,21,22,21,22,21,65,21,22,21,65,21,65,21,65,21,65,21,65,21,65,21,22,21,65,21,65,21,65,21,65,21,65,21,65,21,65,21,65,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,65,21,4892})
            }
    );

    private static Brand mitsubishi = new Brand(
            "mitsubishi",
            new Pattern[] {
                    //Mitsubishi[1250](32894,1,1,10,70,10,70,10,70,10,30,10,30,10,30,10,70,10,30,10,30,10,70,10,30,10,70,10,30,10,30,10,70,10,30,10,834,10,70,10,70,10,70,10,30,10,30,10,30,10,70,10,30,10,30,10,70,10,30,10,70,10,30,10,30,10,70,10,30,10,4210)
                    new Pattern(32894, new int[]{1,1,10,70,10,70,10,70,10,30,10,30,10,30,10,70,10,30,10,30,10,70,10,30,10,70,10,30,10,30,10,70,10,30,10,834,10,70,10,70,10,70,10,30,10,30,10,30,10,70,10,30,10,30,10,70,10,30,10,70,10,30,10,30,10,70,10,30,10,4210})
            }
    );

    private static Brand vizio = new Brand(
            "vizio",
            new Pattern[] {
                    //Vizio[1756](38226,1,1,343,171,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,22,21,65,21,65,21,65,21,65,21,65,21,22,21,22,21,65,21,65,21,65,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,65,21,65,21,65,21,65,21,4892)
                    new Pattern(38226, new int[]{1,1,343,171,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,22,21,65,21,65,21,65,21,65,21,65,21,22,21,22,21,65,21,65,21,65,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,22,21,65,21,65,21,65,21,65,21,65,21,65,21,4892})
            }
    );

    private static Brand rca = new Brand(
            "rca",
            new Pattern[] {
                    //RCA[1047](57603,1,1,228,230,28,115,28,115,28,115,28,115,28,58,28,58,28,115,28,115,28,115,28,58,28,115,28,115,28,58,28,58,28,58,28,58,28,115,28,115,28,58,28,58,28,58,28,115,28,58,28,58,28,7373)
                    new Pattern(57603, new int[]{1,1,228,230,28,115,28,115,28,115,28,115,28,58,28,58,28,115,28,115,28,115,28,58,28,115,28,115,28,58,28,58,28,58,28,58,28,115,28,115,28,58,28,58,28,58,28,115,28,58,28,58,28,7373})
            }
    );

    //Array containing all brands
    private static Brand[] allBrands = {samsung,sony,lg,panasonic,philips,nec,sharp,jvc,toshiba,mitsubishi,vizio,rca};


    //This method returns the allBrands array
    public static Brand[] getAllBrands() {
        return allBrands;
    }

    //This method returns the Brands designation
    public String getDesignation() {
        return designation;
    }



}
